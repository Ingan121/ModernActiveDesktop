<!DOCTYPE html>
<html>
    <head>
        <title>ChannelViewer</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="bootstrap-icons/bootstrap-icons.css">
    </head>
    <body>
        <div id="container">
            <div id="toolbar">
                <div id="back-button" class="toolbarButton" onclick="browserViewCtl('back');">
                    <i class="bi-arrow-left toolbarButtonImage"></i>
                </div>
                <div id="forward-button" class="toolbarButton" onclick="browserViewCtl('forward');">
                    <i class="bi-arrow-right toolbarButtonImage"></i>
                </div>
                <div id="refresh-stop-button" class="toolbarButton" onclick="browserViewCtl(this.dataset.status);" data-status="stop">
                    <i class="bi-x-circle toolbarButtonImage"></i>
                </div>
                <input id="urlbar" type="text" onfocus="this.select();" onblur="getSelection().removeAllRanges()" onkeyup="if (event.key == 'Enter') go(this.value)">
                <div class="rightalign">
                    <div id="progress-bar" class="progress">
                        <div id="progress-bar-inside" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%">0%</div>
                    </div>
                    <div id="windowBtnContainer">
                        <div style="float: left;">
                            <div class="windowBtn" style="right: 35px;">
                                <p onclick="window.minimize();">ðŸ—•</p>
                            </div>
                            <div class="windowBtn" style="right: 17px;">
                                <p onclick="document.exitFullscreen();">ðŸ——</p>
                            </div>
                            <div class="windowBtn" style="right: 0;">
                                <p onclick="window.close();">ðŸ—™</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!--<a href="javascript:location.reload(true);" style="position: absolute; right: 50px; top: 0;">ìƒˆë¡œê³ ì¹¨</a>-->
            </div>
        </div>
        <script>
            document.onkeydown = function (e) {
                if (e.code == "F11") {
                    e.preventDefault();
                    if (document.fullscreen) document.exitFullscreen();
                    else document.body.requestFullscreen();

                }
            }
            
            function browserViewCtl(cmd) {
                window.postMessage({
                    type : 'cvbvctl' + ipc.cvNumber, // ChannelViewer BrowserView Control
                    command : cmd
                }, "*");
            }

            function go(url) {
                if (!url.startsWith('http')) url = 'http://' + url;
                window.postMessage({
                    type : 'cvbvurl' + ipc.cvNumber, // ChannelViewer BrowserView Control
                    command : url
                }, "*");
            }
            
            function minimize() {
                window.postMessage({
                    type: 'cvwndctl' + ipc.cvNumber, // ChannelViewer Window Control
                    command: 'minimize'
                }, "*");
            }
        </script>
    </body>
</html>
