<!DOCTYPE html>
<html>
<head>
    <title>ModernActiveDesktop</title>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="https://madesktop.ingan121.com/icon.ico">
    <link rel="stylesheet" href="https://madesktop.ingan121.com/css/wall.css">
    <link rel="stylesheet" href="https://madesktop.ingan121.com/css/98.css">
</head>
<body>
    <div id="msgboxBg" style="display: block;">
        <div id="msgbox" class="window" style="transform: translate(-50%, -50%);">
            <div class="title-bar">
                <div class="title-bar-text">ModernActiveDesktop</div>
            </div>
            <div class="window-body">
                <section class="field-row">
                    <img id="msgbox-icon" src="https://madesktop.ingan121.com/images/info.png">
                    <p id="msgbox-msg">Migrating data...</p>
                </section>
            </div>
        </div>
    </div>
    <iframe src="https://madesktop.ingan121.com/confmgr.html?action=migrate" style="display: none;"></iframe>
    <div id="errorWnd" class="window">
        <p id="errorMsg">ModernActiveDesktop failed to migrate data because of an unknown error. Please consult the log below and report this to https://github.com/Ingan121/ModernActiveDesktop/issues.</p>
        <pre id="errorLog"></pre>
        <noscript>Please enable JavaScript!</noscript>
        <button onclick="copyLog();">Copy log</button> <button onclick="abort();">Abort</button> <button onclick="location.reload(true);">Retry</button> <button onclick="errorWnd.style.display='none';">Ignore</button>
    </div>
    <script>
        var errorLog = document.getElementById("errorLog");

        if (document.documentMode) {
            errorLog.textContent = "Internet Explorer is NOT supported! Please use a modern browser like Chrome, Firefox, or Edge.\n";
        }

        window.onerror = function (msg, url, linenum) {
            errorLog.textContent += msg + ' (' + url + ':' + linenum + ')\n';
        }

        function copyLog() {
            var tmp = document.createElement("textarea");
            document.body.appendChild(tmp);
            tmp.value = errorLog.textContent;
            tmp.select();
            document.execCommand('copy');
            document.body.removeChild(tmp);
        }
    </script>
    <script src="migrator.js"></script>
</body>
</html>
