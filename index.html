<!DOCTYPE html>
<html>
<head>
    <title>ModernActiveDesktop</title>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="icon.ico">
    <link rel="stylesheet" href="css/wall.css">
    <link rel="stylesheet" href="css/98.css">
    <link id="scheme" rel="stylesheet" href="data:text/css,">
    <link id="font" rel="stylesheet" href="">
    <link id="menuStyle" rel="stylesheet" href="">
    <style id="style"></style>
</head>
<body>
    <div id="bgHtmlContainer" class="bgHtml">
        <iframe id="bgHtmlView" class="bgHtml" src="bghtml/index.html"></iframe>
    </div>
    <video id="bgVideo" src="" autoplay loop></video>
    <div class="windowContainer">
        <div class="windowTitlebar">
            <div class="title-bar-text">ModernActiveDesktop</div>
            <div class="title-bar-controls">
                <div class="windowMenuBtn windowBtn">
                    <p class="windowBtnText">‚è∑</p>
                </div>
                <img class="windowIcon" src="icon.ico">
                <div class="windowCloseBtn windowBtn">
                    <p class="windowBtnText">üóô</p>
                </div>
                <button class="windowCloseBtnAlt window-button"></button>
            </div>
        </div>
        <div class="windowFrame">
            <iframe class="windowElement" name="DeskMovrW" src="ChannelBar.html" width="84px" height="471px"></iframe>
            <div class="dropdownBg" tabindex="-1">
                <div class="dropdown">
                    <div class="dropdownItem">Dummy</div>
                </div>
            </div>
        </div>
        <div class="windowMenuBg contextMenuBg window" tabindex="-1">
            <div class="windowMenu contextMenu window-body">
                <div class="contextMenuItem"><p>C<u>o</u>nfigure</p><p class="submenuMark">‚èµ</p></div>
                <div class="contextMenuItem debug"><p><u>D</u>ebug <span class="windowNumber"></span></p></div>
                <div class="contextMenuItem"><p>R<u>e</u>set</p></div>
                <div class="contextMenuItem"><p><u>R</u>eload</p></div>
                <div class="contextMenuItem hasIcon"><b>üóô <u>C</u>lose</b></div>
            </div>
        </div>
        <div class="confMenuBg contextMenuBg window" tabindex="-1">
            <div class="confMenu contextMenu window-body">
                <div class="contextMenuItem"><p><u>A</u>ctive Desktop</p></div>
                <div class="contextMenuItem"><p><u>N</u>on-ActiveDesktop Channel Bar</p></div>
                <div class="contextMenuItem"><p><u>W</u>indow</p></div>
                <hr>
                <div class="contextMenuItem checkedItem"><p><u>S</u>cale contents</p></div>
                
                <div class="contextMenuItem"><p>A<u>l</u>ways on top</p></div>
                <hr>
                <div class="contextMenuItem"><p><u>C</u>hange URL</p></div>
                <div class="contextMenuItem"><p>Change <u>t</u>itle</p></div>
                <hr>
                <div class="contextMenuItem"><p>N<u>e</u>w window</p></div>
                <div class="contextMenuItem"><p><u>R</u>eload wallpaper</p></div>
                <div class="contextMenuItem"><p><u>P</u>roperties</p></div>
            </div>
        </div>
    </div>
    <div id="mainMenuBg" class="contextMenuBg window" tabindex="-1">
        <div id="mainMenu" class="contextMenu window-body">
            <div class="contextMenuItem"><p><u>N</u>ew</p></div>
            <div class="contextMenuItem"><p>P<u>r</u>operties</p></div>
        </div>
    </div>
    <div id="msgboxBg">
        <div id="msgbox" class="window">
            <div class="title-bar">
                <div class="title-bar-text">ModernActiveDesktop</div>
                <div class="title-bar-controls">
                    <button id="msgbox-close" class="window-button"></button>
                </div>
            </div>
            <div class="window-body">
                <section class="field-row">
                    <img id="msgbox-icon" src="images/info.png">
                    <p id="msgbox-msg">Message</p>
                </section>
                <input id="msgbox-input" type="text">
                <section id="msgbox-buttons" class="field-row">
                    <button id="msgbox-btn1">OK</button>
                    <button id="msgbox-btn2">Cancel</button>
                </section>
            </div>
        </div>
    </div>
    <div id="errorWnd" class="window">
        <p id="errorMsg">ModernActiveDesktop failed to initialize because of an unknown error. Please consult the log below and report this to https://github.com/Ingan121/ModernActiveDesktop/issues.</p>
        <pre id="errorLog"></pre>
        <noscript>Please enable JavaScript!</noscript>
        <button onclick="copyLog();">Copy log</button> <button onclick="localStorage.clear();location.reload(true);">Reset config</button> <button onclick="location.reload(true);">Retry</button> <button onclick="errorWnd.style.display='none';">Ignore</button>
    </div>
    <div id="debug" class="debug">
        <span>ModernActiveDesktop 3.1 Pre-release 5</span><br>
        <span>Loaded from <span id="location"></span></span><br>
        <span>Running in <span id="runmode">browser</span><span id="simmode"></span></span><br>
        <span>Debug mode</span><br>
        <a href="javascript:localStorage.clear();location.reload(true);">Reset config</a><br>
        <a href="javascript:location.reload(true);">Refresh</a><br>
        <a href="javascript:debug();">Run JavaScript code</a><br>
        <a href="javascript:showErrors();">Show errors <span id="errorCnt"></span></a><br>
        <a id="debugLogBtn" href="javascript:toggleDebugLog();">Enable debug logging</a><br>
        <a id="toggleModeBtn" href="javascript:toggleRunningMode();">Simulate other environment</a><br>
        <a href="javascript:deactivateDebugMode();">Deactivate debug mode</a>
    </div>
    <script>
        const errorLog = document.getElementById("errorLog");
        const errorCnt = document.getElementById("errorCnt");
        
        window.onerror = function(msg, url, linenum) {
            console.log({msg, url, linenum});
            errorLog.textContent += `${msg} (${url}:${linenum})\n`;
            errorCnt.textContent = `(${parseInt(errorCnt.textContent.slice(1, -1) || 0) + 1})`;
        }
        
        function copyLog() {
            const tmp = document.createElement("textarea");
            document.body.appendChild(tmp);
            tmp.value = errorLog.textContent;
            tmp.select();
            document.execCommand('copy');
            document.body.removeChild(tmp);
        }
    </script>
    <script src="js/DeskMover.js"></script>
    <script src="js/DeskSettings.js"></script>
</body>
</html>
