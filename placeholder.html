<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>ModernActiveDesktop</title>
  <link rel="stylesheet" href="css/98.css">
  <link rel="stylesheet" href="css/placeholder.css">
  <link id="scheme" rel="stylesheet" href="data:text/css,">
  <link id="font" rel="stylesheet" href="">
  <style id="style"></style>
</head>

<body id="placeholder">
    тоб Click this button to configure<br><br>
    Or try one of the following:<br>
    <div class="icon" onclick="openApp('jspaint')">
      <img src="images/mspaint.png" width="32" height="32"><br>
      <div>JSPaint</div>
    </div>
    <div class="icon" onclick="openApp('sol')">
      <img src="images/sol.png" width="32" height="32"><br>
      <div>Solitaire</div>
    </div>
    <div class="icon" onclick="openApp('vis')">
      <img src="apps/visualizer/icon32.png" width="32" height="32"><br>
      <div>visualizer</div>
    </div>
    <div class="icon" onclick="openYoutube()">
      <img src="images/youtube.svg" width="32" height="32"><br>
      <div>YouTube</div>
    </div>
    <script src="js/libmad.js"></script>
    <script>
        function openApp(app) {
          switch(app) {
            case "jspaint":
              madResizeTo(268, 355);
              madMoveTo(250, 150);
              madChangeWndStyle("wnd");
              madLocReplace("apps/jspaint/index.html");
              return;
            case "sol":
              madResizeTo(660, 440);
              madMoveTo(250, 150);
              madChangeWndStyle("wnd");
              madLocReplace("apps/solitaire/index.html");
              return;
            case "vis":
              madResizeTo(800, 600);
              madMoveTo(800, 200);
              madChangeWndStyle("wnd");
              madLocReplace("apps/visualizer/index.html");
              return;
          }
        }

        function openYoutube() {
          madPrompt("Enter a YouTube URL", function (url) {
            if (url == null) return;
            const id = parseVideoId(url);
            if (id == null) {
              madAlert("Invalid URL", null, "error");
              return;
            }
            madResizeTo(560, 315);
            madMoveTo(250, 150);
            madChangeWndStyle("wnd");
            madLocReplace("https://www.youtube.com/embed/" + id);
          }, 'https://www.youtube.com/watch?v=dQw4w9WgXcQ', '');
        }

        function parseVideoId(url) {
          try {
            const urlObj = new URL(url);
            if (urlObj.hostname == "youtu.be") {
              return urlObj.pathname.substring(1);
            }
            if (urlObj.hostname.includes("youtube")) {
              return urlObj.searchParams.get("v");
            }
            return null;
          } catch {
            return null;
          }
        }
    </script>
</body>

</html>